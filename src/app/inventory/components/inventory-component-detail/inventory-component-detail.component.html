<form
  class="px-4"
  [formGroup]="myForm"
  (ngSubmit)="onSubmit()"
>
  <div class="row">
    <div class="col-12 px-3 ">
      <div class="row pb-1">
        <div class="col-2 pb-1 ">
          <mat-slide-toggle
            class="mt-4"
            formControlName="enabled"
          >
            Enabled?
          </mat-slide-toggle>
        </div>
        <div
          class="col pb-1"
          *ngIf="mode !== PageMode.CREATE"
        >
          <mat-form-field>
            <mat-label>Id</mat-label>
            <input
              matInput
              [(ngModel)]="model.id"
              [ngModelOptions]="{standalone: true}"
              placeholder="Id"
              [disabled]="true"
            >
          </mat-form-field>
        </div>

        <div class="col">
          <mat-form-field>
            <mat-label>Code</mat-label>
            <input
              matInput
              formControlName="code"
            >
          </mat-form-field>
        </div>

      </div>

      <div class="row py-1">

        <div class="col">
          <mat-form-field>
            <mat-label>Sensor</mat-label>
            <input
              matInput
              type="text"
              formControlName="sensor"
              [matAutocomplete]="autoSensor"
            >
            <mat-autocomplete
              #autoSensor="matAutocomplete"
              [displayWith]="sensorDisplayFn"
            >
              <mat-option
                *ngFor="let option of (filteredSensors | async)"
                [value]="option"
              >{{option.name}}</mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>

        <div class="col">
          <mat-form-field>
            <mat-label>Cable</mat-label>
            <input
              matInput
              type="text"
              formControlName="cable"
              [matAutocomplete]="autoCable"
            >
            <mat-autocomplete
              #autoCable="matAutocomplete"
              [displayWith]="cableDisplayFn"
            >
              <mat-option
                *ngFor="let option of (filteredCables | async)"
                [value]="option"
              >{{option.code}}</mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>

        <div class="col">
          <mat-form-field>
            <mat-label>Cable length (m)</mat-label>
            <input
              matInput
              formControlName="cable_length"
            >
          </mat-form-field>
        </div>
      </div>

      <div class="row py-1">
        <div class="col">
          <div class="row">
            <div class="col-4">
              <mat-form-field>
                <mat-label>Orientation X</mat-label>
                <input
                  type="number"
                  matInput
                  formControlName="orientation_x"
                >
              </mat-form-field>
            </div>
            <div class="col-4">
              <mat-form-field>
                <mat-label>Orientation Y</mat-label>
                <input
                  type="number"
                  matInput
                  formControlName="orientation_y"
                >
              </mat-form-field>
            </div>
            <div class="col-4">
              <mat-form-field>
                <mat-label>Orientation Z</mat-label>
                <input
                  type="number"
                  matInput
                  formControlName="orientation_z"
                >
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>

      <div class="row py-1">


        <div class="col">
          <mat-form-field>
            <mat-label>Damping</mat-label>
            <input
              matInput
              formControlName="damping"
            >
          </mat-form-field>
        </div>

      </div>

      <div class="row">
        <div class="col-12 py-1">
          <div class="d-flex">
            <div class="mr-auto"></div>
            <ng-container *ngIf="mode === PageMode.EDIT">
              <button
                *ngIf=""
                [routerLink]="['/inventory/component',id]"
                class="mr-3"
                mat-raised-button
              >Cancel</button>
              <button
                type="submit"
                [color]="'primary'"
                mat-raised-button
              >Save</button>
            </ng-container>

            <ng-container *ngIf="mode === PageMode.CREATE">

              <button
                [routerLink]="['/inventory/component']"
                class="mr-3"
                mat-raised-button
              >Cancel</button>
              <button
                type="submit"
                [color]="'primary'"
                mat-raised-button
              >Create</button>
            </ng-container>

            <ng-container *ngIf="mode === PageMode.VIEW">
              <button
                [routerLink]="['/inventory/component', id, PageMode.EDIT]"
                type="submit"
                [color]="'primary'"
                mat-raised-button
              >Edit sensor</button>
            </ng-container>
          </div>
        </div>
      </div>

    </div>
  </div>

  <ngx-spinner name="loadingPage"></ngx-spinner>
</form>
