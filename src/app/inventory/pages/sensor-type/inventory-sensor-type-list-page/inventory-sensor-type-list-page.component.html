<mat-toolbar color="primary">
  <app-layout-topbar></app-layout-topbar>
</mat-toolbar>

<div class="container-fluid">

  <app-layout-header>
    <ng-container headline>Sensor types</ng-container>
    <ng-container breadcrumbs>Home > Inventory > Sensor types</ng-container>
    <ng-container actions>
      <button
        (click)="openDialog(sensorTypeCreate)"
        mat-raised-button
        color="primary"
      >Create</button>
      <ng-template #sensorTypeCreate>
        <h2 matDialogTitle>Creating sensor type</h2>
        <mat-dialog-content>
          <app-sensor-type-form
            (cancel)="closeDialog()"
            [mode]="PageMode.CREATE"
          ></app-sensor-type-form>
        </mat-dialog-content>
      </ng-template>
    </ng-container>
  </app-layout-header>

  <app-layout-content>
    <h3
      class="text-center pt-5 pb-5"
      *ngIf="!dataSource || dataSource?.length === 0"
    >
      <ng-container *ngIf="!dataSource">
        Loading...
      </ng-container>
      <ng-container *ngIf="dataSource?.length === 0">
        No cable types
      </ng-container>
    </h3>
    <div class="overflow-auto">
      <table
        mat-table
        *ngIf="dataSource"
        [dataSource]="dataSource"
        class=" w-100"
      >
        <ng-container matColumnDef="id">
          <th
            mat-header-cell
            *matHeaderCellDef
          > ID </th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element.id}} </td>
        </ng-container>

        <ng-container matColumnDef="model">
          <th
            mat-header-cell
            *matHeaderCellDef
          ><span class="pl-3"> Model </span></th>
          <td
            mat-cell
            *matCellDef="let element"
          >
            <button
              mat-button
              matTooltip="Show sensor type detail"
              color="primary"
              (click)="openDialog(sensorTypeUpdate)"
            >
              {{element?.model}}
            </button>
            <ng-template #sensorTypeUpdate>
              <h2 matDialogTitle>Sensor type {{element?.model}}</h2>
              <mat-dialog-content>
                <app-sensor-type-form
                  [model]="element"
                  (cancel)="closeDialog()"
                  [mode]="PageMode.EDIT"
                  [id]="element?.id"
                ></app-sensor-type-form>
              </mat-dialog-content>
            </ng-template>
          </td>
        </ng-container>

        <ng-container matColumnDef="manufacturer">
          <th
            mat-header-cell
            *matHeaderCellDef
          ><span class=""> Manufacturer </span></th>
          <td
            mat-cell
            *matCellDef="let element"
          >{{element?.manufacturer}}
          </td>
        </ng-container>

        <ng-container matColumnDef="sensorType">
          <th
            mat-header-cell
            *matHeaderCellDef
          > Type</th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element?.sensor_type}}
          </td>
        </ng-container>

        <ng-container matColumnDef="motionType">
          <th
            mat-header-cell
            *matHeaderCellDef
          > Motion type</th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element?.motion_type}}
          </td>
        </ng-container>

        <ng-container matColumnDef="resonanceFrequency">
          <th
            mat-header-cell
            *matHeaderCellDef
          > Resonance freq.</th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element?.resonance_frequency}}
          </td>
        </ng-container>

        <ng-container matColumnDef="shuntResistance">
          <th
            mat-header-cell
            *matHeaderCellDef
          > Shunt resistance</th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element?.shunt_resistance}}
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th
            mat-header-cell
            *matHeaderCellDef
          >
          </th>
          <td
            mat-cell
            *matCellDef="let element"
          >
            <button
              mat-icon-button
              [matMenuTriggerFor]="menu"
              aria-label="Sensor type menu"
            >
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button
                mat-menu-item
                color="primary"
                (click)="openDialog(sensorTypeUpdate)"
              >
                <mat-icon>edit</mat-icon>
                <span>Edit</span>
              </button>
              <button
                mat-menu-item
                color="primary"
                (click)="delete(element?.id)"
              >
                <mat-icon>delete</mat-icon>
                <span>Delete</span>
              </button>
            </mat-menu>
            <ng-template #sensorTypeUpdate>
              <h2 matDialogTitle>Sensor type {{element?.model}}</h2>
              <mat-dialog-content>
                <app-sensor-type-form
                  [model]="element"
                  (cancel)="closeDialog()"
                  [mode]="PageMode.EDIT"
                  [id]="element?.id"
                ></app-sensor-type-form>
              </mat-dialog-content>
            </ng-template>
          </td>

        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="displayedColumns"
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns;"
        >
        </tr>
      </table>
    </div>
  </app-layout-content>
</div>
