<mat-toolbar color="primary">
  <app-layout-topbar></app-layout-topbar>
</mat-toolbar>

<div class="container-fluid">

  <app-layout-header>
    <ng-container headline>Cable types</ng-container>
    <ng-container breadcrumbs>Home > Inventory > Cable types</ng-container>
    <ng-container actions>
      <button
        (click)="openDialog(cableTypeCreate)"
        mat-raised-button
        color="primary"
      >Create</button>
      <ng-template #cableTypeCreate>
        <h2 matDialogTitle>Creating cable type</h2>
        <mat-dialog-content>
          <app-inventory-cable-type-detail
            (modelCreated)="onModelCreated($event)"
            (cancel)="closeDialog()"
            [mode]="PageMode.CREATE"
          ></app-inventory-cable-type-detail>
        </mat-dialog-content>
      </ng-template>
    </ng-container>
  </app-layout-header>

  <app-layout-content>

    <h3
      class="text-center pt-5 pb-5"
      *ngIf="!dataSource || dataSource?.length === 0"
    >
      <ng-container *ngIf="!dataSource">
        Loading...
      </ng-container>
      <ng-container *ngIf="dataSource?.length === 0">
        No cable types
      </ng-container>
    </h3>
    <div class="overflow-auto">
      <table
        mat-table
        *ngIf="dataSource"
        [dataSource]="dataSource"
        class=" w-100"
      >
        <ng-container matColumnDef="id">
          <th
            mat-header-cell
            *matHeaderCellDef
          > ID </th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element.id}} </td>
        </ng-container>

        <ng-container matColumnDef="code">
          <th
            mat-header-cell
            *matHeaderCellDef
          ><span class="pl-3"> Code </span></th>
          <td
            mat-cell
            *matCellDef="let element"
          >
            <button
              mat-button
              matTooltip="Show cable type detail"
              color="primary"
              (click)="openDialog(cableTypeUpdate)"
            >
              {{element?.code}}
            </button>
            <ng-template #cableTypeUpdate>
              <h2 matDialogTitle>Cable type {{element?.code}}</h2>
              <mat-dialog-content>
                <app-inventory-cable-type-detail
                  [model]="element"
                  (modelUpdated)="onModelCreated($event)"
                  (cancel)="closeDialog()"
                  [mode]="PageMode.EDIT"
                  [id]="element?.id"
                ></app-inventory-cable-type-detail>
              </mat-dialog-content>
            </ng-template>

          </td>
        </ng-container>

        <ng-container matColumnDef="manufacturer">
          <th
            mat-header-cell
            *matHeaderCellDef
          ><span class=""> Manufacturer </span></th>
          <td
            mat-cell
            *matCellDef="let element"
          >{{element?.manufacturer}}
          </td>
        </ng-container>

        <ng-container matColumnDef="part_number">
          <th
            mat-header-cell
            *matHeaderCellDef
          > Part no.</th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element?.part_number}}
          </td>
        </ng-container>

        <ng-container matColumnDef="r">
          <th
            mat-header-cell
            *matHeaderCellDef
          > r</th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element?.r}}
          </td>
        </ng-container>

        <ng-container matColumnDef="l">
          <th
            mat-header-cell
            *matHeaderCellDef
          > l</th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element?.l}}
          </td>
        </ng-container>

        <ng-container matColumnDef="g">
          <th
            mat-header-cell
            *matHeaderCellDef
          > g</th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element?.g}}
          </td>
        </ng-container>

        <ng-container matColumnDef="c">
          <th
            mat-header-cell
            *matHeaderCellDef
          > c </th>
          <td
            mat-cell
            *matCellDef="let element"
          > {{element?.c}}
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th
            mat-header-cell
            *matHeaderCellDef
          >
          </th>
          <td
            mat-cell
            *matCellDef="let element"
          >
            <button
              mat-icon-button
              [matMenuTriggerFor]="menu"
              aria-label="Sensor type menu"
            >
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button
                mat-menu-item
                color="primary"
                (click)="openDialog(cableTypeUpdate)"
              >
                <mat-icon>edit</mat-icon>
                <span>Edit</span>
              </button>
            </mat-menu>

            <ng-template #cableTypeUpdate>
              <h2 matDialogTitle>Cable type {{element?.code}}</h2>
              <mat-dialog-content>
                <app-inventory-cable-type-detail
                  [model]="element"
                  (modelUpdated)="onModelCreated($event)"
                  (cancel)="closeDialog()"
                  [mode]="PageMode.EDIT"
                  [id]="element?.id"
                ></app-inventory-cable-type-detail>
              </mat-dialog-content>
            </ng-template>
          </td>
        </ng-container>

        <tr
          mat-header-row
          *matHeaderRowDef="displayedColumns"
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns;"
        ></tr>
      </table>
    </div>
  </app-layout-content>
</div>
