<mat-toolbar color="primary">
  <app-header-layout></app-header-layout>
</mat-toolbar>
<form class="container-fluid">
  <div class="row ">
    <div class="col-12">
      <div class="header mb-3">
        <div class="row">
          <div class="col-10 px-5 py-4">
            <h1>Sensor {{sensor?.station?.code}}.{{sensor?.location_code}}</h1>
            <small>
              Inventory > Oyu Tolgoi > Hugo North Underground Network >
              <a
                *ngIf="sensor?.station?.id"
                [routerLink]="['/inventory/stations',sensor?.station?.id]"
              >Station {{sensor?.station?.code}}</a> >
              <a [routerLink]="['/inventory/sensors']">Sensors</a> >
              {{sensorId ? '' + sensor?.station?.code +'.'+ sensor?.location_code + '' : 'Creating new sensor'}}
            </small>
          </div>
          <div class="col-2 pr-4 py-4">
            <button
              class="float-right mt-3"
              mat-icon-button
              [matMenuTriggerFor]="menu"
              aria-label="Sensor menu"
            >
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button
                *ngIf="sensorId"
                mat-menu-item
                color="primary"
                (click)="delete(sensorId)"
              >
                <mat-icon>delete</mat-icon>
                <span>Delete</span>
              </button>
            </mat-menu>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row ">
    <div class="col ">
      <div class=" content">

        <mat-tab-group class="w-100  px-5 py-4">
          <mat-tab label="Details">
            <ng-template matTabContent>
              <app-inventory-sensor-detail
                [sensorId]="sensorId"
                (sensorChange)="sensor = $event"
                [mode]="pageMode"
              ></app-inventory-sensor-detail>
            </ng-template>
          </mat-tab>

          <mat-tab
            label="Components ({{sensor?.components?.length > 0 ? sensor?.components?.length : 0}})"
            [disabled]="pageMode === PageMode.CREATE"
          >
            <ng-template matTabContent>
              <app-inventory-component-list
                *ngIf="sensor?.components"
                [data]="sensor?.components"
                [showPagination]="false"
                [sensorId]="sensor?.id"
              >
              </app-inventory-component-list>
            </ng-template>
          </mat-tab>

          <mat-tab
            label="Signal quality"
            [disabled]="!sensor?.signal_quality"
          >
            <ng-template matTabContent>
              <div class="row">
                <div class="col-2"></div>
                <div class="col-8">

                  <table class="w-100 table">
                    <tbody>
                      <tr>
                        <th>Id</th>
                        <td>{{sensor?.signal_quality?.id}}</td>
                      </tr>
                      <tr>
                        <th>Update timestamp</th>
                        <td>{{sensor?.signal_quality?.update_timestamp}}</td>
                      </tr>
                      <tr>
                        <th>Energy</th>
                        <td>{{sensor?.signal_quality?.energy}}</td>
                      </tr>
                      <tr>
                        <th>Integrity</th>
                        <td>{{sensor?.signal_quality?.integrity}}</td>
                      </tr>
                      <tr>
                        <th>Sampling rate</th>
                        <td>{{sensor?.signal_quality?.sampling_rate}}</td>
                      </tr>
                      <tr>
                        <th>Number of samples</th>
                        <td>{{sensor?.signal_quality?.num_samples}}</td>
                      </tr>
                      <tr>
                        <th>Amplitude</th>
                        <td>{{sensor?.signal_quality?.amplitude}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </ng-template>
          </mat-tab>
        </mat-tab-group>

      </div>
    </div>
  </div>
</form>
