<div class="sidebar-wrapper">
  <div class="card sidebar-tree h-25">
    <div
      class='mat-app-background basic-container'
      style="overflow: auto"
    >
      <app-events-tree (messageEvent)='getTreeNotification($event)'></app-events-tree>
    </div>
  </div>
  <div class="card sidebar-event h-75">
    <div
      class='card-header text-color'
      id='infoTime'
      *ngIf="eventHeader"
    >{{eventHeader}}
      <button
        mat-mini-fab
        matTooltip='Reprocess Event'
        class='btn-toolbar btn btn-primary'
        (click)='onReprocessEvent()'
      >
        <mat-icon>input</mat-icon>
      </button>
    </div>
    <div
      fxLayout="row"
      fxLayoutAlign="start"
      class='card-header interactive-color'
      *ngIf="interactiveEventHeader"
    >{{interactiveEventHeader}}
      <mat-button-toggle-group
        *ngIf='interactiveEventHeader'
        name="acceptRejectInteractive"
        aria-label="Interactive Event"
        matTooltip='Select Accept or Reject Interactive Event Location'
        value='none'
        #group='matButtonToggleGroup'
        (change)='onAcceptRejectEvent(group.value)'
      >
        <mat-button-toggle value='accept'>
          <mat-icon>check_circle</mat-icon>
        </mat-button-toggle>
        <mat-button-toggle value='reject'>
          <mat-icon>clear</mat-icon>
        </mat-button-toggle>
      </mat-button-toggle-group>
    </div>
    <div
      style="overflow: auto"
      id="eventInfoCard"
    >
      <div
        class='card-body'
        style="padding:0px 20px;"
      >
        <table class="table table-extra-condensed">
          <tbody>
            <tr>
              <th scope="row">Magnitude</th>
              <td>{{origin.magnitude}} <font color="red">{{interactiveOrigin.magnitude}}</font>
              </td>
            </tr>
            <tr>
              <th scope="row">Location
                <button
                  *ngIf='interactiveOrigin.y'
                  mat-mini-fab
                  matTooltip='3D View'
                  class='btn-toolbar btn btn-primary'
                  (click)='onViewLocations()'
                >
                  <mat-icon>3d_rotation</mat-icon>
                </button>
              </th>
              <td>X {{origin.x}} m East <font color="red">{{interactiveOrigin.x}}</font>
              </td>
            </tr>
            <tr>
              <th scope="row"></th>
              <td>Y {{origin.y}} m North <font color="red">{{interactiveOrigin.y}}</font>
              </td>
            </tr>
            <tr>
              <th scope="row"></th>
              <td>Z {{origin.z}} m <font color="red">{{interactiveOrigin.z}}</font>
              </td>
            </tr>
            <tr>
              <th scope="row">Picks</th>
              <td>{{origin.npick}}</td>
            </tr>
            <tr>
              <th scope="row">Type
                <button
                  (click)="saveEventTypeStatus()"
                  id="toggleSaveEventType"
                  mat-mini-fab
                  matTooltip='Save Event Type, Status and Evaluation Mode'
                  class='btn btn-primary'
                  data-toggle='button'
                  aria-pressed='false'
                  autocomplete='off'
                >
                  <mat-icon>save_alt</mat-icon>
                </button>
              </th>
              <td>
                <mat-form-field class="selector">
                  <mat-select
                    [(ngModel)]="origin.event_type"
                    (selectionChange)='onChangeEventType($event)'
                  >
                    <mat-select-trigger>
                      {{origin.event_type}}
                    </mat-select-trigger>
                    <mat-option
                      *ngFor="let type of eventTypes"
                      [value]="type.quakeml_type"
                      matTooltip="{{type.viewValue}}"
                    >
                      <mat-icon>
                        {{ type.type === 'E' ? 'multiline_chart' : type.type === 'B' ? 'flare' : type.type === 'OB' ? 'filter_tilt_shift' : type.type === 'SE' ? 'person' : type.type === 'CN' ? 'hearing' : type.type === 'L' ? 'flash_on' : type.type === 'OP' ? 'all_out' : 'more' }}
                      </mat-icon>
                      {{type.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <th scope="row">Status
                <button
                  mat-mini-fab
                  (click)="saveEventTypeStatus()"
                  id='toggleSaveEventStatus'
                  matTooltip='Save Event Type, Status and Evaluation Mode'
                  class='btn btn-primary'
                  data-toggle='button'
                  aria-pressed='false'
                  autocomplete='off'
                >
                  <mat-icon>save_alt</mat-icon>
                </button>
              </th>
              <td>
                <mat-form-field class="selector">
                  <mat-select
                    [(ngModel)]="origin.status"
                    (selectionChange)='onChangeEvaluationStatus($event)'
                  >
                    <mat-option
                      *ngFor="let etype of evalTypes"
                      [value]="etype.status"
                    >
                      {{etype.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <th scope="row">Mode
                <button
                  mat-mini-fab
                  (click)="saveEventTypeStatus()"
                  id='toggleSaveEventEvalMode'
                  matTooltip='Save Event Type, Status and Evaluation Mode'
                  class='btn btn-primary'
                  data-toggle='button'
                  aria-pressed='false'
                  autocomplete='off'
                >
                  <mat-icon>save_alt</mat-icon>
                </button>
              </th>
              <td>
                <mat-form-field class="selector">
                  <mat-select
                    [(ngModel)]="origin.evaluation_mode"
                    (selectionChange)='onChangeEvaluationMode($event)'
                  >
                    <mat-option
                      *ngFor="let emode of evalModes"
                      [value]="emode.evaluation_mode"
                    >
                      {{emode.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
            </tr>
            <tr *ngIf='origin.time_residual'>
              <th scope="row">Time Residual</th>
              <td>{{origin.time_residual}}</td>
            </tr>
            <tr *ngIf='origin.uncertainty'>
              <th scope="row">Uncertainty</th>
              <td>{{origin.uncertainty}}</td>
            </tr>
            <tr>
              <td
                colspan="2"
                id='alertMsg'
                *ngIf='tracesInfo'
                class="alert alert-warning alert-dismissable"
              >
                <button
                  type="button"
                  class="close"
                  (click)='tracesInfo = ""'
                  aria-hidden="true"
                >&times;</button>
                {{tracesInfo}}
              </td>
            </tr>
            <tr>
              <td
                colspan="2"
                id='alertMessage'
                *ngIf='picksWarning'
                class="alert alert-warning alert-dismissable"
              >
                <button
                  type="button"
                  class="close"
                  (click)='picksWarning = ""'
                  aria-hidden="true"
                >&times;</button>
                {{picksWarning}}
              </td>
            </tr>
            <tr *ngIf='origin.event_resource_id'>
              <th scope="row">event_resource_id</th>
              <td>{{origin.event_resource_id}}</td>
            </tr>
            <tr *ngIf='origin.preferred_origin_id'>
              <th scope="row">preferred_origin_id</th>
              <td>{{origin.preferred_origin_id}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <app-notifier></app-notifier>
  </div>
</div>
